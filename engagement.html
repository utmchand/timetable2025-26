<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>Engagement - ‡§Ö‡§µ‡§ï‡§æ‡§∂ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§ö‡§Ø‡§®</title>
  <style>
  * {
    box-sizing: border-box;
  }

  body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(to right, #e0f7fa, #fff);
    margin: 0;
    padding: 20px;
  }

  nav {
    background: #00796b;
    padding: 12px;
    text-align: center;
    margin-bottom: 25px;
  }

  nav a {
    margin: 0 10px;
    color: white;
    font-weight: bold;
    text-decoration: none;
    font-size: 16px;
  }

  h1, h2 {
    text-align: center;
    color: #004d40;
    margin-top: 0;
  }

  ul {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    list-style: none;
    padding: 0;
    justify-content: center;
  }

  li {
    background: #e0f2f1;
    padding: 10px;
    border-radius: 8px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.1);
  }

  .substitute-info {
    margin-top: 20px;
    padding: 15px;
    background: #f9fbe7;
    border: 1px solid #cddc39;
    border-radius: 8px;
    font-size: 16px;
    line-height: 1.5;
  }

  .highlight {
    font-weight: bold;
    color: #2e7d32;
  }

  button {
    background: #00796b;
    color: white;
    border: none;
    padding: 10px 16px;
    border-radius: 6px;
    cursor: pointer;
    margin: 10px 5px;
    font-size: 15px;
  }

  button:hover {
    background: #004d40;
  }

  @media (max-width: 600px) {
    ul {
      flex-direction: column;
      align-items: stretch;
    }

    button {
      width: 100%;
    }
  }
</style>
</head>
<body>

  <nav>
    <a href="index.html">üìÖ ‡§ü‡§æ‡§á‡§Æ‡§ü‡•á‡§¨‡§≤</a>
    <a href="karyabhar.html">üìò ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§≠‡§æ‡§∞</a>
    <a href="substitutes.html">üìò ‡§Ü‡§ú ‡§ï‡•á ‡§è‡§Ç‡§ó‡•á‡§ú ‡§ü‡•Ä‡§ö‡§∞ ‡§¶‡•á‡§ñ‡•á‡§Ç</a> 
  </nav>
  <h1>‡§∂‡§æ. ‡§â.‡§Æ‡§æ.‡§µ‡§ø. ‡§ó‡•ã‡§∞‡§ñ‡§™‡•Å‡§∞ <br> ‡§∏‡•ã‡§Æ‡§µ‡§æ‡§∞ ‡§∏‡•á ‡§∂‡§®‡§ø‡§µ‡§æ‡§∞ ‡§è‡§Ç‡§ó‡•á‡§ú‡§Æ‡•á‡§Ç‡§ü ‡§≤‡§ó‡§æ‡§®‡•á ‡§ï‡§æ ‡§∏‡§Æ‡§Ø ‡§∏‡•Å‡§¨‡§π 10‡§É30 ‡§¨‡§ú‡•á ‡§∏‡•á ‡§∏‡•Å‡§¨‡§π 10‡§É50 ‡§§‡§ï ‡§∞‡§π‡•á‡§ó‡§æ</h1>
  <h2>üë®‚Äçüè´ ‡§Ö‡§µ‡§ï‡§æ‡§∂ ‡§™‡§∞ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§ö‡•Å‡§®‡•á‡§Ç</h2>
  <p>‡§ú‡•ã ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§Ö‡§µ‡§ï‡§æ‡§∂ ‡§™‡§∞ ‡§π‡•à‡§Ç ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§®‡•Ä‡§ö‡•á ‡§∏‡•á ‡§ö‡•Å‡§®‡•á‡§Ç:</p>

  <ul id="teacherList"></ul>

  <button onclick="saveLeaveTeachers()">üíæ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
  <button onclick="clearLeave()">‚ùå ‡§õ‡•Å‡§ü‡•ç‡§ü‡•Ä ‡§π‡§ü‡§æ‡§è‡§Ç</button>
  <button onclick="downloadAssignments()">‚¨áÔ∏è JSON ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç)</button>

  <div class="substitute-info" id="substituteInfo"></div>

  <script>
    const teachers = [
      "P.S. JHARIYA", "H.K. THAKUR", "N.R. SAHU", "RAJESH MURKHE",
      "SUNIL UIKEY", "VIKAS VERMA", "UTTAM CHAND DEHRIYA", "RINKESH THAKUR",
      "MADAN DHEEMAR", "N.P. MEHRA", "HARERAM VANSHKAR", "VINITA CHOURASIYA",
      "DHARMENDRA NEMA", "SHUBHAM CHOURASIYA", "NAGEENA MOMIN", "DEEPALI SHARMA",
      "SMITA SHARMA", "DEEPAK", "R.K. ORIYA", "BABLI CHOUDHARY"
    ];

    const teacherGender = {
      "P.S. JHARIYA": "male", "H.K. THAKUR": "male", "N.R. SAHU": "male",
      "RAJESH MURKHE": "male", "SUNIL UIKEY": "male", "VIKAS VERMA": "male",
      "UTTAM CHAND DEHRIYA": "male", "RINKESH THAKUR": "male", "MADAN DHEEMAR": "male",
      "N.P. MEHRA": "male", "HARERAM VANSHKAR": "male", "VINITA CHOURASIYA": "female",
      "DHARMENDRA NEMA": "male", "SHUBHAM CHOURASIYA": "male", "NAGEENA MOMIN": "female",
      "DEEPALI SHARMA": "female", "SMITA SHARMA": "female", "DEEPAK": "male", "R.K. ORIYA": "male", "BABLI CHOUDHARY": "female"
    };

    const periodMap = {
      "10:50-11:30": "‡§™‡§π‡§≤‡§æ",
      "11:30-12:10": "‡§¶‡•Ç‡§∏‡§∞‡§æ",
      "12:20-01:00": "‡§§‡•Ä‡§∏‡§∞‡§æ",
      "01:00-01:40": "‡§ö‡•å‡§•‡§æ",
      "02:10-02:50": "‡§™‡•â‡§ö‡§µ‡§æ",
      "02:50-03:30": "‡§õ‡§†‡§µ‡•â",
      "03:30-04:00": "‡§∏‡§æ‡§§‡§µ‡•â",
      "04:00-04:30": "‡§Ü‡§†‡§µ‡•â"
    };

    // Demo timetable (same format as index.html timetable object)
    const timetable = {
  "Monday": {
    "10:50-11:30": {
      "IX A": "ENGLISH - HARERAM VANSHKAR",
      "IX B": "SOCIAL SCIENCE - RAJESH MURKHE",
      "X A": "ENGLISH - NAGEENA MOMIN",
      "X B": "HINDI - SUNIL UIKEY",
      "XI A": "POLITICAL SCIENCE - H.K. THAKUR",
      "XI B": "GEOGRAPHY - N.R. SAHU",
      "XI C": "MATHS - DHARMENDRA NEMA / BIO - SMITA SHARMA",
      "XII A": "HISTORY - MADAN DHEEMAR",
      "XII C": "CHEMISTRY - N.P. MEHRA"
    },
    "11:30-12:10": {
      "IX A": "SOCIAL SCIENCE - RAJESH MURKHE",
      "IX B": "HINDI - VINITA CHOURASIYA",
      "X A": "SCIENCE - SMITA SHARMA",
      "X B": "SOCIAL SCIENCE - H.K. THAKUR",
      "XI A & C": "ENGLISH - VIKAS VERMA / AGRICULTURE - RINKESH THAKUR",
      "XI C": "ENGLISH - HARERAM VANSHKAR",
      "XII A": "GEOGRAPHY - N.R. SAHU",
      "XII C": "PHYSICS - SHUBHAM CHOURASIYA"
    },
    "12:20-01:00": {
      "IX A": "HINDI - VINITA CHOURASIYA",
      "IX B": "SCIENCE - DEEPALI SHARMA",
      "X A": "HINDI - SUNIL UIKEY",
      "X B": "MATHS - DHARMENDRA NEMA",
      "XI A": "GEOGRAPHY - N.R. SAHU",
      "XI B":"HISTORY - MADAN DHEEMAR",
      "XI C": "CHEMISTRY - N.P. MEHRA",
      "XII A": "ENGLISH - VIKAS VERMA / AGRICULTURE - RINKESH THAKUR",
      "XII C": "MATHS - SHUBHAM CHOURASIYA / BIO - SMITA SHARMA"
    },
    "01:00-01:40": {
      "IX A": "MATHS - DHARMENDRA NEMA",
      "IX B": "ENGLSIH - HARERAM VANSHKAR",
      "X A & B": "IT - UTTAM CHAND DEHRIYA / AGRICULTURE - RINKESH THAKUR / SANSKRIT - VINITA CHOURASIYA",
      "XI A": "HISTORY - MADAN DHEEMAR",
      "XI B": "POLITICAL SCIENCE - H.K. THAKUR",
      "XI C": "PHYSICS - SHUBHAM CHOURASIYA",
      "XII A": "POLITICAL SCIENCE - RAJESH MURKHE",
      "XII C": "HINDI - SUNIL UIKEY"
    },
    "02:10-02:50": {
      "IX A": "SCIENCE - DEEPALI SHARMA",
      "IX B": "MATHS - SHUBHAM CHOURASIYA",
      "X A": "MATHS - DHARMENDRA NEMA",
      "X B": "SCIENCE - SMITA SHARMA",
      "XI A & C": "HINDI - SUNIL UIKEY / IT - UTTAM CHAND DEHRIYA",
      "XI B": "HINDI - VINITA CHOURASIYA / IT - UTTAM CHAND DEHRIYA",
      "XII A": "HINDI - P.S. JHARIYA",
      "XII C": "ENGLISH - VIKAS VERMA"
    },
    "02:50-03:30": {
      "IX A & B": "IT - UTTAM CHAND DEHRIYA / AGRICULTURE - RINKESH THAKUR / SANSKRIT - VINITA CHOURASIYA",
      "X A": "SOCIAL SCIENCE - MADAN DHEEMAR",
      "X B": "ENGLSIH - NAGEENA MOMIN",
      "XI A": "HISTORY - MADAN DHEEMAR",
      "XI B": "POLITICAL SCIENCE - H.K. THAKUR",
      "XI C": "BIOLOGY PRACTICAL - SMITA SHARMA",
      "XII A": "ICT - DEEPAK",
      "XII C": "CHEMISTRY PRACTICAL - N.P. MEHRA"
    },
    "03:30-04:00": {
      "IX A": "ENGLISH - HARERAM VANSHKAR",
      "IX B": "SCIENCE PRACTICAL - N.P. MEHRA",
      "X A": "SCIENCE PRACTICAL - SMITA SHARMA",
      "X B": "ENGLISH - NAGEENA MOMIN",
      "XI A": "ENGLISH - VIKAS VERMA",
      "XI B": "GEOGRAPHY PRACTICAL - N.R. SAHU",
      "XI C": "BIO PRACTICAL - SMITA SHARMA",
      "XII A": "ICT DEEPAK",
      "XII C": "CHEMISTRY - N.P. MEHRA"
    },
    "04:00-04:30": {
      "IX A": "GAMES - SUNIL UIKEY",
      "IX B": "GAMES - SUNIL UIKEY",
      "X A": "GAMES - SUNIL UIKEY",
      "X B": "GAMES - SUNIL UIKEY",
      "XI A": "GAMES - SUNIL UIKEY",
      "XI B": "GAMES - SUNIL UIKEY",
      "XI C": "GAMES - SUNIL UIKEY",
      "XII A": "GAMES - SUNIL UIKEY",
      "XII B": "GAMES - SUNIL UIKEY",
      "XII C": "GAMES - SUNIL UIKEY"
    },
    
  },
  
  
};

    // ‡§™‡•á‡§ú ‡§≤‡•ã‡§°
    window.onload = function () {
      const ul = document.getElementById('teacherList');
      teachers.forEach(t => {
        const li = document.createElement('li');
        li.innerHTML = `<label><input type="checkbox" value="${t}"> ${t}</label>`;
        ul.appendChild(li);
      });

      const saved = JSON.parse(localStorage.getItem("leaveTeachers")) || [];
      saved.forEach(name => {
        const box = [...document.querySelectorAll('input[type="checkbox"]')].find(cb => cb.value === name);
        if (box) box.checked = true;
      });

      showSubstituteMessage();
    };

    function saveLeaveTeachers() {
      const leaveTeachers = [...document.querySelectorAll('input[type="checkbox"]:checked')].map(cb => cb.value);
      localStorage.setItem("leaveTeachers", JSON.stringify(leaveTeachers));
      showSubstituteMessage();
      document.getElementById('substituteInfo').innerHTML += `<br><br><a href="substitutes.html" target="_blank">üìÑ ‡§∏‡§¨‡•ç‡§∏‡•ç‡§ü‡•Ä‡§ü‡•ç‡§Ø‡•Ç‡§ü ‡§°‡•ç‡§Ø‡•Ç‡§ü‡•Ä ‡§¶‡•á‡§ñ‡•á‡§Ç</a>`;
    }

    function clearLeave() {
      localStorage.removeItem("leaveTeachers");
      localStorage.removeItem("substituteAssignments");
      location.reload();
    }

    function showSubstituteMessage() {
      const infoDiv = document.getElementById("substituteInfo");
      const leaveTeachers = JSON.parse(localStorage.getItem("leaveTeachers")) || [];
      const existingAssignments = JSON.parse(localStorage.getItem("substituteAssignments")) || {};
      const engagedByTime = {};
      let messages = [];

      for (let day in timetable) {
        for (let time in timetable[day]) {
          const key = `${day}-${time}`;
          engagedByTime[key] = new Set();

          const periodData = timetable[day][time];
          for (let cls in periodData) {
            const parts = periodData[cls].split(/[/|\\]|\/\/|,|&|‡§î‡§∞| ‡§§‡§•‡§æ /);
            parts.forEach(part => {
              const teacher = part.split(" - ")[1]?.trim().toUpperCase();
              if (teacher && teachers.includes(teacher)) {
                engagedByTime[key].add(teacher);
              }
            });
          }
        }
      }

      leaveTeachers.forEach(leaveTeacher => {
        const assignedMessages = [];
        const uniqueKeys = new Set();

        for (let day in timetable) {
          for (let time in timetable[day]) {
            const periodData = timetable[day][time];

            for (let cls in periodData) {
              const parts = periodData[cls].split(/[/|\\]|\/\/|,|&|‡§î‡§∞| ‡§§‡§•‡§æ /);
              parts.forEach(part => {
                const teacher = part.split(" - ")[1]?.trim().toUpperCase();
                if (teacher === leaveTeacher.toUpperCase()) {
                  const key = `${day}-${time}-${teacher}`;
                  if (uniqueKeys.has(key)) return;
                  uniqueKeys.add(key);

                  const timeKey = `${day}-${time}`;
                  const engagedSet = engagedByTime[timeKey];
                  const substituteKey = `${leaveTeacher}-${day}-${time}`;

                  let substitute = existingAssignments[substituteKey];

                  if (!substitute) {
                    const vacant = teachers.filter(t =>
                    t !== "UTTAM CHAND DEHRIYA" &&             // <-- ‡§Ø‡§π‡§æ‡§Å ‡§¨‡•ç‡§≤‡•â‡§ï ‡§ï‡§ø‡§Ø‡§æ
                    !leaveTeachers.includes(t) &&
                    !engagedSet.has(t)
                    );
                    if (vacant.length === 0) {
                      assignedMessages.push(`‡§Ü‡§ú <span class="highlight">${leaveTeacher}</span> ‡§õ‡•Å‡§ü‡•ç‡§ü‡•Ä ‡§™‡§∞ ‡§π‡•à‡§Ç, ‡§≤‡•á‡§ï‡§ø‡§® ${periodMap[time] || time} ‡§™‡•Ä‡§∞‡§ø‡§Ø‡§° ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§`);
                      return;
                    } else {
                      substitute = vacant[Math.floor(Math.random() * vacant.length)];
                      existingAssignments[substituteKey] = substitute;
                    }
                  }

                  const gender = teacherGender[substitute] === "female" ? "‡§™‡§¢‡§º‡§æ‡§Ø‡•á‡§Ç‡§ó‡•Ä" : "‡§™‡§¢‡§º‡§æ‡§è‡§Ç‡§ó‡•á";
                  const hindiPeriod = periodMap[time] || time;

                  assignedMessages.push(`‡§Ü‡§ú <span class="highlight">${leaveTeacher}</span> ‡§õ‡•Å‡§ü‡•ç‡§ü‡•Ä ‡§™‡§∞ ‡§π‡•à‡§Ç, ‡§â‡§®‡§ï‡•Ä ‡§ú‡§ó‡§π <span class="highlight">${substitute}</span> ${hindiPeriod} ‡§™‡•Ä‡§∞‡§ø‡§Ø‡§° ‡§Æ‡•á‡§Ç ${gender}‡•§`);
                  engagedSet.add(substitute);
                }
              });
            }
          }
        }

        if (assignedMessages.length === 0) {
          messages.push(`‡§Ü‡§ú <span class="highlight">${leaveTeacher}</span> ‡§ï‡§æ ‡§ï‡•ã‡§à ‡§™‡•Ä‡§∞‡§ø‡§Ø‡§° ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§`);
        } else {
          messages.push(...assignedMessages);
        }
      });

      localStorage.setItem("substituteAssignments", JSON.stringify(existingAssignments));
      infoDiv.innerHTML = messages.length ? messages.join("<br><br>") : "‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§Ö‡§µ‡§ï‡§æ‡§∂ ‡§™‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§";
    }

  function downloadAssignments() {
  const assignments = JSON.parse(localStorage.getItem("substituteAssignments")) || {};
  const blob = new Blob([JSON.stringify(assignments, null, 2)], { type: "application/json" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "assignments.json";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

  </script>



<script>
  // Right-click disable
  document.addEventListener('contextmenu', e => e.preventDefault());

  // Text selection disable
  document.addEventListener('selectstart', e => e.preventDefault());

  // Keyboard shortcut block (Ctrl+U, Ctrl+C, Ctrl+S, Ctrl+A)
  document.addEventListener('keydown', function (e) {
    if (e.ctrlKey && ['u', 'c', 's', 'a'].includes(e.key.toLowerCase())) {
      e.preventDefault();
    }
  });

  // F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+Shift+C disable
  document.onkeydown = function (e) {
    if (e.keyCode === 123 || 
        (e.ctrlKey && e.shiftKey && ['I', 'J', 'C'].includes(e.key.toUpperCase()))) {
      return false;
    }
  };
</script>

<footer style="margin-top: 40px; padding: 10px; text-align: center; background: #f0f0f0; font-size: 14px; color: #555;">
  <div style="font-size: 18px; color: #388e3c; font-weight: bold;"> *{U.C.D.}*</div>
    ¬© 2025 ‡§∂‡§æ‡§∏‡§ï‡•Ä‡§Ø ‡§â.‡§Æ‡§æ.‡§µ‡§ø. ‡§ó‡•ã‡§∞‡§ñ‡§™‡•Å‡§∞, ‡§ú‡§ø‡§≤‡§æ - ‡§®‡§∞‡§∏‡§ø‡§Ç‡§π‡§™‡•Å‡§∞ (‡§Æ.‡§™‡•ç‡§∞.) |DEVELOPED & MAINTAINED BY UTTAM CHAND DEHRIYA (VOCATIONAL TRAINER - I.T.)
  </footer>

</body>
</html>